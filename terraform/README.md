# Terraform ì¸í”„ë¼ ê´€ë¦¬ ê°€ì´ë“œ

## ğŸ“ í´ë” êµ¬ì¡°

```
terraform/
â”œâ”€â”€ stages/                    # ê°œë°œ/ìŠ¤í…Œì´ì§• í™˜ê²½
â”‚   â”œâ”€â”€ 01-network/           # VPC, ì„œë¸Œë„·, ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ 02-security/          # ë³´ì•ˆ ê·¸ë£¹, IAM
â”‚   â”œâ”€â”€ 03-eks/               # EKS í´ëŸ¬ìŠ¤í„°
â”‚   â”œâ”€â”€ 04-rds/               # RDS ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ 05-frontend/          # S3, CloudFront
â”‚   â””â”€â”€ 06-api-gateway/       # API Gateway
â”œâ”€â”€ production/                # í”„ë¡œë•ì…˜ í™˜ê²½
â””â”€â”€ README.md                  # ì´ íŒŒì¼
```

## ğŸš€ ì‚¬ìš©ë²•

### **ê°œë°œ/ìŠ¤í…Œì´ì§• í™˜ê²½ ë°°í¬**

ê° ë‹¨ê³„ë³„ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
# 1ë‹¨ê³„: ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ ìƒì„±
cd terraform/stages/01-network/
terraform init
terraform plan
terraform apply

# 2ë‹¨ê³„: ë³´ì•ˆ ì„¤ì •
cd ../02-security/
terraform init
terraform plan
terraform apply

# 3ë‹¨ê³„: EKS í´ëŸ¬ìŠ¤í„° ìƒì„±
cd ../03-eks/
terraform init
terraform plan
terraform apply

# 4ë‹¨ê³„: RDS ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
cd ../04-rds/
terraform init
terraform plan
terraform apply

# 5ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ì¸í”„ë¼ ìƒì„±
cd ../05-frontend/
terraform init
terraform plan
terraform apply

# 6ë‹¨ê³„: API Gateway ìƒì„±
cd ../06-api-gateway/
terraform init
terraform plan
terraform apply
```

### **í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬**

```bash
cd terraform/production/
terraform init
terraform plan
terraform apply
```

## ğŸ”§ ê° ë‹¨ê³„ë³„ ìƒì„¸ ì„¤ëª…

### **01-network/**
- **VPC**: 10.0.0.0/16 CIDR ë¸”ë¡
- **í¼ë¸”ë¦­ ì„œë¸Œë„·**: ap-northeast-2a, ap-northeast-2c
- **í”„ë¼ì´ë¹— ì„œë¸Œë„·**: NAT Gatewayë¥¼ í†µí•œ ì¸í„°ë„· ì ‘ê·¼
- **ë¼ìš°íŒ… í…Œì´ë¸”**: í¼ë¸”ë¦­/í”„ë¼ì´ë¹— ì„œë¸Œë„· ë¼ìš°íŒ…

### **02-security/**
- **ë³´ì•ˆ ê·¸ë£¹**: EKS, RDS, ALBìš© ë³´ì•ˆ ê·¸ë£¹
- **IAM ì—­í• **: EKS í´ëŸ¬ìŠ¤í„°, ë…¸ë“œ ê·¸ë£¹ìš© IAM ì—­í• 
- **OIDC ê³µê¸‰ì**: EKS í´ëŸ¬ìŠ¤í„°ìš© OIDC ì„¤ì •

### **03-eks/**
- **EKS í´ëŸ¬ìŠ¤í„°**: Kubernetes 1.28 ë²„ì „
- **ë…¸ë“œ ê·¸ë£¹**: t3.medium ì¸ìŠ¤í„´ìŠ¤, 1-3ê°œ ë…¸ë“œ
- **í´ëŸ¬ìŠ¤í„° ìë™ ìŠ¤ì¼€ì¼ëŸ¬**: ë…¸ë“œ ìˆ˜ ìë™ ì¡°ì •

### **04-rds/**
- **PostgreSQL**: 13.12 ë²„ì „
- **ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…**: db.t3.micro
- **ìŠ¤í† ë¦¬ì§€**: 20GB (ìµœëŒ€ 100GB ìë™ í™•ì¥)
- **ë°±ì—…**: 7ì¼ ë³´ê´€

### **05-frontend/**
- **S3 ë²„í‚·**: ì •ì  ì›¹ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…
- **CloudFront**: CDN ë° HTTPS ì¢…ë£Œ
- **ë„ë©”ì¸**: ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì§€ì› (ì„ íƒì‚¬í•­)

### **06-api-gateway/**
- **REST API**: ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì—°ë™
- **CORS**: í”„ë¡ íŠ¸ì—”ë“œ ë„ë©”ì¸ í—ˆìš©
- **í”„ë¡ì‹œ**: ALBë¡œì˜ ìš”ì²­ ì „ë‹¬

## âš ï¸ ì£¼ì˜ì‚¬í•­

### **ìˆœì„œ ì¤‘ìš”**
1. **ë„¤íŠ¸ì›Œí¬** â†’ **ë³´ì•ˆ** â†’ **EKS** â†’ **RDS** â†’ **í”„ë¡ íŠ¸ì—”ë“œ** â†’ **API Gateway**
2. ê° ë‹¨ê³„ëŠ” ì´ì „ ë‹¨ê³„ì˜ ì¶œë ¥ê°’ì— ì˜ì¡´í•©ë‹ˆë‹¤
3. ìˆœì„œë¥¼ ë°”ê¾¸ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

### **í™˜ê²½ ë³€ìˆ˜**
- ê° ë‹¨ê³„ë³„ë¡œ `terraform.tfvars` íŒŒì¼ì—ì„œ í™˜ê²½ë³„ ì„¤ì • ê°€ëŠ¥
- `environment` ë³€ìˆ˜ë¡œ dev/staging/prod êµ¬ë¶„

### **ìƒíƒœ íŒŒì¼**
- ê° ë‹¨ê³„ë³„ë¡œ ë…ë¦½ì ì¸ ìƒíƒœ íŒŒì¼ ê´€ë¦¬
- `terraform.tfstate` íŒŒì¼ ë°±ì—… ê¶Œì¥

## ğŸ” ë¬¸ì œ í•´ê²°

### **ì¼ë°˜ì ì¸ ì˜¤ë¥˜**
- **ë¦¬ì†ŒìŠ¤ ì˜ì¡´ì„± ì˜¤ë¥˜**: ì´ì „ ë‹¨ê³„ê°€ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸
- **ê¶Œí•œ ì˜¤ë¥˜**: AWS IAM ê¶Œí•œ í™•ì¸
- **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜**: VPC ë° ì„œë¸Œë„· ì„¤ì • í™•ì¸

### **ë””ë²„ê¹… ëª…ë ¹ì–´**
```bash
# ìƒíƒœ í™•ì¸
terraform show

# ê³„íš ì¬ìƒì„±
terraform plan -refresh=true

# íŠ¹ì • ë¦¬ì†ŒìŠ¤ë§Œ ì¬ìƒì„±
terraform taint aws_instance.example
```

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. AWS ì½˜ì†”ì—ì„œ ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸
2. Terraform ë¡œê·¸ ë° ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸
3. ê° ë‹¨ê³„ë³„ ì¶œë ¥ê°’ í™•ì¸

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024ë…„ 12ì›”
**ë²„ì „**: 1.0
**í™˜ê²½**: AWS EKS, RDS, S3, CloudFront, API Gateway
